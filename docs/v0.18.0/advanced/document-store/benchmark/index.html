<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

<meta property="og:title" content="One Million Scale Benchmark" />
  
<meta property="og:type" content="website" />
  
<meta property="og:url" content="https://docarray.jina.ai/advanced/document-store/benchmark/" />
  
<meta property="og:site_name" content="DocArray 0.18.0 Documentation" />
  
<meta property="og:description" content="We create a DocumentArray with one million Documents using randomly generated data from a uniform distribution and benchmark all supported document stores. This includes classic database and vector database, all under the same DocumentArray API:,,, Name, Usage, Version,,, In-memory DocumentArray,..." />
  
<meta property="og:image" content="https://docarray.jina.ai/_images/benchmark-banner.gif" />
  
<meta property="og:image:alt" content="DocArray 0.18.0 Documentation" />
  
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@JinaAI_">
<meta name="twitter:creator" content="@JinaAI_">
<meta name="description" content="DocArray is a library for nested, unstructured data such as text, image, audio, video, 3D mesh.">
<meta property="og:description" content="DocArray is a library for nested, unstructured data such as text, image, audio, video, 3D mesh. It allows deep learning engineers to easily preprocess, embed, search, recommend and transfer the data.">

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-48WE9V68SD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-48WE9V68SD');
</script>

<script async defer src="https://buttons.github.io/buttons.js"></script>
    <link rel="index" title="Index" href="../../../genindex/" /><link rel="search" title="Search" href="../../../search/" /><link rel="next" title="Jina" href="../../../fundamentals/jina-support/" /><link rel="prev" title="Add New Document Store" href="../extend/" />
        <link rel="canonical" href="https://docarray.jina.ai/advanced/document-store/benchmark.html" />

    <link rel="shortcut icon" href="../../../_static/favicon.png"/><meta name="generator" content="sphinx-5.3.0, furo 2022.09.29"/>
        <title>One Million Scale Benchmark - DocArray 0.18.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/main.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" />
    
    


<style>
  body {
    --color-code-background: #ffffff;
  --color-code-foreground: #4d4d4d;
  --color-brand-primary: #009191;
  --color-brand-content: #009191;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
    <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
    <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
    <header class="mobile-header">
        <div class="header-left">
            <label class="nav-overlay-icon" for="__navigation">
                <div class="visually-hidden">Toggle site navigation sidebar</div>
                <i class="icon">
                    <svg>
                        <use href="#svg-menu"></use>
                    </svg>
                </i>
            </label>
        </div>
        <div class="header-center">
            <a href="../../../">
                <div class="brand">DocArray 0.18.0 documentation</div>
            </a>
        </div>
        <div class="header-right">
            <div class="theme-toggle-container theme-toggle-header">
                <button class="theme-toggle">
                    <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
                    <svg class="theme-icon-when-auto">
                        <use href="#svg-sun-half"></use>
                    </svg>
                    <svg class="theme-icon-when-dark">
                        <use href="#svg-moon"></use>
                    </svg>
                    <svg class="theme-icon-when-light">
                        <use href="#svg-sun"></use>
                    </svg>
                </button>
            </div>
            <label class="toc-overlay-icon toc-header-icon" for="__toc">
                <div class="visually-hidden">Toggle table of contents sidebar</div>
                <i class="icon">
                    <svg>
                        <use href="#svg-toc"></use>
                    </svg>
                </i>
            </label>
        </div>
    </header>
    <aside class="sidebar-drawer">
        <div class="sidebar-container">
            
            <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../../_static/logo-light.svg" alt="Light Logo" />
    <img class="sidebar-logo only-dark" src="../../../_static/logo-dark.svg" alt="Dark Logo" />
  </div>
  
  
</a>
<script>
  function setPrefix(prefix){
    window.sessionStorage.setItem("version-select-index", document.getElementsByClassName("version-select")[0].selectedIndex);
    window.location.href = prefix
  }
</script>
<script defer>
  fetch(`https://${window.location.host}/_versions.json`)
  .then((resp) => resp.json())
  .then((data) => {
    var versionSelector = document.getElementsByClassName("version-select")[0]
    for(var i = 0; i < data.length; i++){
      var option = document.createElement("option");
      option.innerHTML = data[i].version;
      option.value = "/" + data[i].version;
      versionSelector.appendChild(option);
    }

    if(window.sessionStorage.getItem('version-select-index')){
      versionSelector.selectedIndex = window.sessionStorage.getItem('version-select-index');
    }
  })
  .catch((err) => console.log(err));
</script>
<div class="sd-d-flex-row sd-align-major-spaced">
  <a class="github-button" href="https://github.com/jina-ai/docarray" data-icon="octicon-star" data-show-count="true" aria-label="Star jina-ai/jina on GitHub" style="opacity: 0;">Star</a>
  <select onChange="setPrefix(this.value)" class="version-select">
    <option value="/">latest</option>
  </select>
</div><form class="sidebar-search-container" method="get" action="../../../search/" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
    <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../get-started/what-is/">What is DocArray?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../get-started/what-is/#comparing-to-alternatives">Comparing to Alternatives</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../get-started/install/">Install</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../datatypes/">Multimodal Data</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../datatypes/text/"><svg aria-hidden="true" class="sd-octicon sd-octicon-typography" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em"><path d="M6.21 8.5L4.574 3.594 2.857 8.5H6.21zm.5 1.5l.829 2.487a.75.75 0 001.423-.474L5.735 2.332a1.216 1.216 0 00-2.302-.018l-3.39 9.688a.75.75 0 001.415.496L2.332 10H6.71zm3.13-4.358C10.53 4.374 11.87 4 13 4c1.5 0 3 .939 3 2.601v5.649a.75.75 0 01-1.448.275C13.995 12.82 13.3 13 12.5 13c-.77 0-1.514-.231-2.078-.709-.577-.488-.922-1.199-.922-2.041 0-.694.265-1.411.887-1.944C11 7.78 11.88 7.5 13 7.5h1.5v-.899c0-.54-.5-1.101-1.5-1.101-.869 0-1.528.282-1.84.858a.75.75 0 11-1.32-.716zM14.5 9H13c-.881 0-1.375.22-1.637.444-.253.217-.363.5-.363.806 0 .408.155.697.39.896.249.21.63.354 1.11.354.732 0 1.26-.209 1.588-.449.35-.257.412-.495.412-.551V9z" fill-rule="evenodd"></path></svg> Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../datatypes/image/"><svg aria-hidden="true" class="sd-octicon sd-octicon-image" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em"><path d="M1.75 2.5a.25.25 0 00-.25.25v10.5c0 .138.112.25.25.25h.94a.76.76 0 01.03-.03l6.077-6.078a1.75 1.75 0 012.412-.06L14.5 10.31V2.75a.25.25 0 00-.25-.25H1.75zm12.5 11H4.81l5.048-5.047a.25.25 0 01.344-.009l4.298 3.889v.917a.25.25 0 01-.25.25zm1.75-.25V2.75A1.75 1.75 0 0014.25 1H1.75A1.75 1.75 0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0016 13.25zM5.5 6a.5.5 0 11-1 0 .5.5 0 011 0zM7 6a2 2 0 11-4 0 2 2 0 014 0z" fill-rule="evenodd"></path></svg> Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../datatypes/video/"><svg aria-hidden="true" class="sd-octicon sd-octicon-device-camera-video" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em"><path d="M16 3.75a.75.75 0 00-1.136-.643L11 5.425V4.75A1.75 1.75 0 009.25 3h-7.5A1.75 1.75 0 000 4.75v6.5C0 12.216.784 13 1.75 13h7.5A1.75 1.75 0 0011 11.25v-.675l3.864 2.318A.75.75 0 0016 12.25v-8.5zm-5 5.075l3.5 2.1v-5.85l-3.5 2.1v1.65zM9.5 6.75v-2a.25.25 0 00-.25-.25h-7.5a.25.25 0 00-.25.25v6.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-4.5z" fill-rule="evenodd"></path></svg> Video</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../datatypes/audio/"><svg aria-hidden="true" class="sd-octicon sd-octicon-unmute" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em"><path d="M7.563 2.069A.75.75 0 018 2.75v10.5a.75.75 0 01-1.238.57L3.472 11H1.75A1.75 1.75 0 010 9.25v-2.5C0 5.784.784 5 1.75 5h1.723l3.289-2.82a.75.75 0 01.801-.111zM6.5 4.38L4.238 6.319a.75.75 0 01-.488.181h-2a.25.25 0 00-.25.25v2.5c0 .138.112.25.25.25h2a.75.75 0 01.488.18L6.5 11.62V4.38zm6.096-2.038a.75.75 0 011.06 0 8 8 0 010 11.314.75.75 0 01-1.06-1.06 6.5 6.5 0 000-9.193.75.75 0 010-1.06v-.001zm-1.06 2.121a.75.75 0 10-1.061 1.061 3.5 3.5 0 010 4.95.75.75 0 101.06 1.06 5 5 0 000-7.07l.001-.001z" fill-rule="evenodd"></path></svg> Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../datatypes/mesh/"><svg aria-hidden="true" class="sd-octicon sd-octicon-package" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em"><path d="M8.878.392a1.75 1.75 0 00-1.756 0l-5.25 3.045A1.75 1.75 0 001 4.951v6.098c0 .624.332 1.2.872 1.514l5.25 3.045a1.75 1.75 0 001.756 0l5.25-3.045c.54-.313.872-.89.872-1.514V4.951c0-.624-.332-1.2-.872-1.514L8.878.392zM7.875 1.69a.25.25 0 01.25 0l4.63 2.685L8 7.133 3.245 4.375l4.63-2.685zM2.5 5.677v5.372c0 .09.047.171.125.216l4.625 2.683V8.432L2.5 5.677zm6.25 8.271l4.625-2.683a.25.25 0 00.125-.216V5.677L8.75 8.432v5.516z" fill-rule="evenodd"></path></svg> 3D Mesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../datatypes/tabular/"><svg aria-hidden="true" class="sd-octicon sd-octicon-table" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v3.585a.746.746 0 010 .83v8.085A1.75 1.75 0 0114.25 16H6.309a.748.748 0 01-1.118 0H1.75A1.75 1.75 0 010 14.25V6.165a.746.746 0 010-.83V1.75zM1.5 6.5v7.75c0 .138.112.25.25.25H5v-8H1.5zM5 5H1.5V1.75a.25.25 0 01.25-.25H5V5zm1.5 1.5v8h7.75a.25.25 0 00.25-.25V6.5h-8zm8-1.5h-8V1.5h7.75a.25.25 0 01.25.25V5z" fill-rule="evenodd"></path></svg> Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../datatypes/multimodal/"><svg aria-hidden="true" class="sd-octicon sd-octicon-stack" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em"><path d="M7.122.392a1.75 1.75 0 011.756 0l5.003 2.902c.83.481.83 1.68 0 2.162L8.878 8.358a1.75 1.75 0 01-1.756 0L2.119 5.456a1.25 1.25 0 010-2.162L7.122.392zM8.125 1.69a.25.25 0 00-.25 0l-4.63 2.685 4.63 2.685a.25.25 0 00.25 0l4.63-2.685-4.63-2.685zM1.601 7.789a.75.75 0 011.025-.273l5.249 3.044a.25.25 0 00.25 0l5.249-3.044a.75.75 0 01.752 1.298l-5.248 3.044a1.75 1.75 0 01-1.756 0L1.874 8.814A.75.75 0 011.6 7.789zm0 3.5a.75.75 0 011.025-.273l5.249 3.044a.25.25 0 00.25 0l5.249-3.044a.75.75 0 01.752 1.298l-5.248 3.044a1.75 1.75 0 01-1.756 0l-5.248-3.044a.75.75 0 01-.273-1.025z" fill-rule="evenodd"></path></svg> Multi-modal</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guides</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../fundamentals/document/">Document</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/document/construct/">Construct</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/document/serialization/">Serialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/document/attribute/">Access Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/document/embedding/">Embedding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/document/nested/">Nested Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/document/visualization/">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/document/fluent-interface/">Fluent Interface</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../fundamentals/documentarray/">DocumentArray</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/documentarray/construct/">Construct</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/documentarray/serialization/">Serialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/documentarray/access-elements/">Access Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/documentarray/access-attributes/">Access Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/documentarray/find/">Query by Conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/documentarray/parallelization/">Parallelization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/documentarray/visualization/">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/documentarray/post-external/">Process via External Flow or Executor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/documentarray/embedding/">Embed via Neural Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/documentarray/matching/">Find Nearest Neighbours</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/documentarray/subindex/">Search over Nested Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/documentarray/evaluation/">Evaluate Matches</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../fundamentals/dataclass/">Dataclass</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/dataclass/construct/">Construct</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/dataclass/access/">Access Modality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/dataclass/new-type/">Support New Modality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fundamentals/dataclass/example/">Process Modality</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../">Document Store</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../sqlite/">SQLite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../annlite/">Annlite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qdrant/">Qdrant</a></li>
<li class="toctree-l2"><a class="reference internal" href="../elasticsearch/">Elasticsearch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../weaviate/">Weaviate</a></li>
<li class="toctree-l2"><a class="reference internal" href="../redis/">Redis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extend/">Add New Document Store</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">One Million Scale Benchmark</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Integrations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../fundamentals/jina-support/">Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fundamentals/notebook-support/">Jupyter Notebook/Colab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../torch-support/">PyTorch/Deep Learning Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fundamentals/fastapi-support/">FastAPI/Pydantic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../graphql-support/">GraphQL</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api/"><span class="fab fa-python"></span> Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../proto/">Protocol Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog/">Changelog</a></li>
</ul>

    <p class="caption" role="heading"><span class="caption-text">Ecosystem</span></p>
    <ul>
        <li class="toctree-l1">
            <a class="reference external" href="https://docs.jina.ai">
                <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/search-light.svg">
                <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/search-dark.svg">
                Jina</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://hub.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/hub-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/hub-dark.svg">
            Jina Hub</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://finetuner.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/finetuner-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/finetuner-dark.svg">
            Finetuner</a></li>
        <li class="toctree-l1"><a class="reference internal" href="#">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/docarray-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/docarray-dark.svg">
            DocArray</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://clip-as-service.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/cas-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/cas-dark.svg">
            CLIP-as-service</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://github.com/jina-ai/jcloud">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/JCloud-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/JCloud-dark.svg">
            JCloud</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://github.com/jina-ai/now">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/now-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/now-dark.svg">
            NOW</a></li>
    </ul>
</div>
</div>

            </div>
            
        </div>
    </aside>
    <div class="main">
        <div class="content">
            <div class="article-container">
                <a href="#" class="back-to-top muted-link">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
                    </svg>
                    <span>Back to top</span>
                </a>
                <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
                        <button class="theme-toggle">
                            <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
                            <svg class="theme-icon-when-auto">
                                <use href="#svg-sun-half"></use>
                            </svg>
                            <svg class="theme-icon-when-dark">
                                <use href="#svg-moon"></use>
                            </svg>
                            <svg class="theme-icon-when-light">
                                <use href="#svg-sun"></use>
                            </svg>
                        </button>
                    </div>
                    <label class="toc-overlay-icon toc-content-icon"
                           for="__toc">
                        <div class="visually-hidden">Toggle table of contents sidebar</div>
                        <i class="icon">
                            <svg>
                                <use href="#svg-toc"></use>
                            </svg>
                        </i>
                    </label>
                </div>
                <article role="main">
                    <section id="one-million-scale-benchmark">
<h1>One Million Scale Benchmark<a class="headerlink" href="#one-million-scale-benchmark" title="Permalink to this heading">#</a></h1>
<figure class="align-default">
<a class="reference internal image-reference" href="https://docarray.jina.ai/_images/benchmark-banner.gif"><img alt="https://docarray.jina.ai/_images/benchmark-banner.gif" src="https://docarray.jina.ai/_images/benchmark-banner.gif" style="width: 0.0%;" /></a>
</figure>
<figure class="align-default">
<a class="reference internal image-reference" href="../../../_images/benchmark-banner.gif"><img alt="../../../_images/benchmark-banner.gif" src="../../../_images/benchmark-banner.gif" style="width: 0.0px; height: 0.0px;" /></a>
</figure>
<p>We create a DocumentArray with one million Documents using randomly generated data from a uniform distribution and benchmark all supported document stores.
This includes classic database and vector database, all under the same DocumentArray API:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>In-memory DocumentArray</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DocumentArray()</span></code></p></td>
<td><p>DocArray <code class="docutils literal notranslate"><span class="pre">0.16.0</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../sqlite/"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">Sqlite</span></code></span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DocumentArray(storage='sqlite')</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2.6.0</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../weaviate/"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">Weaviate</span></code></span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DocumentArray(storage='weaviate')</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">3.3.0</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../qdrant/"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">Qdrant</span></code></span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DocumentArray(storage='qdrant')</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.7.3</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../annlite/"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">Annlite</span></code></span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DocumentArray(storage='anlite')</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.3.2</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../elasticsearch/"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">ElasticSearch</span></code></span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DocumentArray(storage='elasticsearch')</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">8.2.0</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../redis/"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">Redis</span></code></span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DocumentArray(storage='redis')</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">4.3.0</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>We focus on the following tasks:</p>
<ol class="arabic simple">
<li><p><strong>Create</strong>: add one million Documents to the document store via <a class="reference internal" href="../../../api/docarray.array.storage.base.seqlike/#docarray.array.storage.base.seqlike.BaseSequenceLikeMixin.extend" title="docarray.array.storage.base.seqlike.BaseSequenceLikeMixin.extend"><code class="xref py py-meth docutils literal notranslate"><span class="pre">extend()</span></code></a>.</p></li>
<li><p><strong>Read</strong>: retrieve existing Documents from the document store by <code class="docutils literal notranslate"><span class="pre">.id</span></code>, i.e. <code class="docutils literal notranslate"><span class="pre">da['some_id']</span></code>.</p></li>
<li><p><strong>Update</strong>: update existing Documents in the document store by <code class="docutils literal notranslate"><span class="pre">.id</span></code>, i.e. <code class="docutils literal notranslate"><span class="pre">da['some_id']</span> <span class="pre">=</span> <span class="pre">Document(...)</span></code>.</p></li>
<li><p><strong>Delete</strong>: delete Documents from the document store by <code class="docutils literal notranslate"><span class="pre">.id</span></code>, i.e. <code class="docutils literal notranslate"><span class="pre">del</span> <span class="pre">da['some_id']</span></code></p></li>
<li><p><strong>Find by condition</strong>: search existing Documents by <code class="docutils literal notranslate"><span class="pre">.tags</span></code> via <a class="reference internal" href="../../../api/docarray.array.mixins.find/#module-docarray.array.mixins.find" title="docarray.array.mixins.find"><code class="xref py py-meth docutils literal notranslate"><span class="pre">find()</span></code></a> in the document store by boolean filters, as described in <a class="reference internal" href="../../../fundamentals/documentarray/find/#find-documentarray"><span class="std std-ref">Query by Conditions</span></a>.</p></li>
<li><p><strong>Find by vector</strong>: retrieve existing Documents by <code class="docutils literal notranslate"><span class="pre">.embedding</span></code> via <a class="reference internal" href="../../../api/docarray.array.mixins.find/#module-docarray.array.mixins.find" title="docarray.array.mixins.find"><code class="xref py py-meth docutils literal notranslate"><span class="pre">find()</span></code></a>  using  nearest neighbor search or approximate nearest neighbor search, as described in <a class="reference internal" href="../../../fundamentals/documentarray/matching/#match-documentarray"><span class="std std-ref">Find Nearest Neighbours</span></a>.</p></li>
</ol>
<p>The above tasks are often atomic operations in high-level DocArray API. Hence, understanding their performance gives user a good estimation of the experience when using DocumentArray with different backends.</p>
<p>We are interested in the single query performance on the above tasks, which means tasks 2,3,4,5,6 are evaluated using one Document at a time, repeatedly. We report the average number.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<ul class="simple">
<li><p><strong>Benchmarks are conducted end-to-end</strong>: We benchmark function calls from DocArray, not just the underlying backend vector database. Therefore, results for a particular backend can be influenced (positively or negatively) by our interface. If you can spot bottlenecks we would be thrilled to know about and improve our code.</p></li>
<li><p><strong>We use similar underlying search algorithms but different implementations</strong>: In this benchmark we focus on setting only parameters <code class="docutils literal notranslate"><span class="pre">ef</span></code>, <code class="docutils literal notranslate"><span class="pre">ef_construct</span></code> and <code class="docutils literal notranslate"><span class="pre">max_connections</span></code> from HNSW. Note that there might be other parameters that storage backends can fix than might or might not be accessible and can have a big impact on performance. This means that even similar configurations cannot be easily compared.</p></li>
<li><p><strong>Benchmark is for DocArray users, not for research</strong>: This benchmark showcases what a user can expect to get from DocArray without tuning hyper-parameters of a vector database. In practice, we strongly recommend tuning them to achieve high quality results.</p></li>
</ul>
</div>
<section id="benchmark-result">
<h2>Benchmark result<a class="headerlink" href="#benchmark-result" title="Permalink to this heading">#</a></h2>
<p>The following table summarizes the result. The smaller the values, the better (except for <code class="docutils literal notranslate"><span class="pre">Recall&#64;10</span></code>). The best performer of each task is highlighted in <strong>bold</strong>:</p>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">Same HNSW parameters (ef, ef_construct, max_connections)</label><div class="tab-content docutils">
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Store</p></th>
<th class="head text-right"><p>Create 1M (s)</p></th>
<th class="head text-right"><p>Read (ms)</p></th>
<th class="head text-right"><p>Update (ms)</p></th>
<th class="head text-right"><p>Delete (ms)</p></th>
<th class="head text-right"><p>Find by condition (s)</p></th>
<th class="head text-right"><p>Find by vector (s)</p></th>
<th class="head text-right"><p>Recall&#64;10</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>None</p></td>
<td class="text-right"><p><strong>0.6</strong></p></td>
<td class="text-right"><p><strong>0.1</strong></p></td>
<td class="text-right"><p><strong>0.01</strong></p></td>
<td class="text-right"><p><strong>0.39</strong></p></td>
<td class="text-right"><p><strong>5</strong></p></td>
<td class="text-right"><p>1.43</p></td>
<td class="text-right"><p>1.00</p></td>
</tr>
<tr class="row-odd"><td><p>Sqlite</p></td>
<td class="text-right"><p>4,366.8</p></td>
<td class="text-right"><p>0.3</p></td>
<td class="text-right"><p>0.35</p></td>
<td class="text-right"><p>2.62</p></td>
<td class="text-right"><p>31</p></td>
<td class="text-right"><p>23.59</p></td>
<td class="text-right"><p>1.00</p></td>
</tr>
<tr class="row-even"><td><p>Annlite</p></td>
<td class="text-right"><p>72.4</p></td>
<td class="text-right"><p>0.3</p></td>
<td class="text-right"><p>6.57</p></td>
<td class="text-right"><p>4.62</p></td>
<td class="text-right"><p>30</p></td>
<td class="text-right"><p>0.42</p></td>
<td class="text-right"><p>0.19</p></td>
</tr>
<tr class="row-odd"><td><p>Qdrant</p></td>
<td class="text-right"><p>2,286.3</p></td>
<td class="text-right"><p>1.6</p></td>
<td class="text-right"><p>1.50</p></td>
<td class="text-right"><p>4.14</p></td>
<td class="text-right"><p>605</p></td>
<td class="text-right"><p><strong>0.01</strong></p></td>
<td class="text-right"><p>0.51</p></td>
</tr>
<tr class="row-even"><td><p>Weaviate</p></td>
<td class="text-right"><p>1,612.4</p></td>
<td class="text-right"><p>33.7</p></td>
<td class="text-right"><p>27.94</p></td>
<td class="text-right"><p>13.38</p></td>
<td class="text-right"><p>1,242</p></td>
<td class="text-right"><p>0.02</p></td>
<td class="text-right"><p>0.11</p></td>
</tr>
<tr class="row-odd"><td><p>ElasticSearch</p></td>
<td class="text-right"><p>1,307.3</p></td>
<td class="text-right"><p>2.4</p></td>
<td class="text-right"><p>40.85</p></td>
<td class="text-right"><p>40.74</p></td>
<td class="text-right"><p>656</p></td>
<td class="text-right"><p>0.23</p></td>
<td class="text-right"><p><strong>0.85</strong></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">Default HNSW parameters</label><div class="tab-content docutils">
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Store</p></th>
<th class="head text-right"><p>Create 1M (s)</p></th>
<th class="head text-right"><p>Read (ms)</p></th>
<th class="head text-right"><p>Update (ms)</p></th>
<th class="head text-right"><p>Delete (ms)</p></th>
<th class="head text-right"><p>Find by condition (s)</p></th>
<th class="head text-right"><p>Find by vector (s)</p></th>
<th class="head text-right"><p>Recall&#64;10</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>None</p></td>
<td class="text-right"><p><strong>0.6</strong></p></td>
<td class="text-right"><p><strong>0.1</strong></p></td>
<td class="text-right"><p><strong>0.01</strong></p></td>
<td class="text-right"><p><strong>0.16</strong></p></td>
<td class="text-right"><p><strong>5</strong></p></td>
<td class="text-right"><p>1.43</p></td>
<td class="text-right"><p>1.00</p></td>
</tr>
<tr class="row-odd"><td><p>Sqlite</p></td>
<td class="text-right"><p>4,446.6</p></td>
<td class="text-right"><p>0.3</p></td>
<td class="text-right"><p>0.35</p></td>
<td class="text-right"><p>16.77</p></td>
<td class="text-right"><p>30</p></td>
<td class="text-right"><p>24.38</p></td>
<td class="text-right"><p>1.00</p></td>
</tr>
<tr class="row-even"><td><p>Annlite</p></td>
<td class="text-right"><p>114.0</p></td>
<td class="text-right"><p>0.3</p></td>
<td class="text-right"><p>9.36</p></td>
<td class="text-right"><p>20.09</p></td>
<td class="text-right"><p>30</p></td>
<td class="text-right"><p>0.43</p></td>
<td class="text-right"><p>0.14</p></td>
</tr>
<tr class="row-odd"><td><p>Qdrant</p></td>
<td class="text-right"><p>2,227.4</p></td>
<td class="text-right"><p>1.6</p></td>
<td class="text-right"><p>42.16</p></td>
<td class="text-right"><p>20.59</p></td>
<td class="text-right"><p>608</p></td>
<td class="text-right"><p><strong>0.01</strong></p></td>
<td class="text-right"><p>0.51</p></td>
</tr>
<tr class="row-even"><td><p>Weaviate</p></td>
<td class="text-right"><p>1,612.0</p></td>
<td class="text-right"><p>2.3</p></td>
<td class="text-right"><p>44.01</p></td>
<td class="text-right"><p>22.26</p></td>
<td class="text-right"><p>1,208</p></td>
<td class="text-right"><p><strong>0.01</strong></p></td>
<td class="text-right"><p>0.10</p></td>
</tr>
<tr class="row-odd"><td><p>ElasticSearch</p></td>
<td class="text-right"><p>715.2</p></td>
<td class="text-right"><p>2.1</p></td>
<td class="text-right"><p>15.58</p></td>
<td class="text-right"><p>33.26</p></td>
<td class="text-right"><p>650</p></td>
<td class="text-right"><p>0.22</p></td>
<td class="text-right"><p><strong>0.83</strong></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>When we consider each query as a Document, we can convert the above metrics into query/document per second, i.e. QPS/DPS. Values are higher the better (except for <code class="docutils literal notranslate"><span class="pre">Recall&#64;10</span></code>). The best performer of each task is highlighted in <strong>bold</strong>:</p>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">Same HNSW parameters (ef, ef_construct, max_connections) in QPS</label><div class="tab-content docutils">
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Store</p></th>
<th class="head text-right"><p>Create 1M</p></th>
<th class="head text-right"><p>Read</p></th>
<th class="head text-right"><p>Update</p></th>
<th class="head text-right"><p>Delete</p></th>
<th class="head text-right"><p>Find by condition</p></th>
<th class="head text-right"><p>Find by vector</p></th>
<th class="head text-right"><p>Recall&#64;10</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>None</p></td>
<td class="text-right"><p><strong>1,610,305</strong></p></td>
<td class="text-right"><p><strong>9,345</strong></p></td>
<td class="text-right"><p><strong>71,428</strong></p></td>
<td class="text-right"><p><strong>2,570</strong></p></td>
<td class="text-right"><p><strong>0.190</strong></p></td>
<td class="text-right"><p>0.70</p></td>
<td class="text-right"><p>1.00</p></td>
</tr>
<tr class="row-odd"><td><p>Sqlite</p></td>
<td class="text-right"><p>22</p></td>
<td class="text-right"><p>3125</p></td>
<td class="text-right"><p>2,816</p></td>
<td class="text-right"><p>381</p></td>
<td class="text-right"><p>0.032</p></td>
<td class="text-right"><p>0.04</p></td>
<td class="text-right"><p>1.00</p></td>
</tr>
<tr class="row-even"><td><p>Annlite</p></td>
<td class="text-right"><p>1,380</p></td>
<td class="text-right"><p>4,000</p></td>
<td class="text-right"><p>152</p></td>
<td class="text-right"><p>216</p></td>
<td class="text-right"><p>0.033</p></td>
<td class="text-right"><p>2.34</p></td>
<td class="text-right"><p>0.19</p></td>
</tr>
<tr class="row-odd"><td><p>Qdrant</p></td>
<td class="text-right"><p>43</p></td>
<td class="text-right"><p>604</p></td>
<td class="text-right"><p>664</p></td>
<td class="text-right"><p>241</p></td>
<td class="text-right"><p>0.002</p></td>
<td class="text-right"><p><strong>90.90</strong></p></td>
<td class="text-right"><p>0.51</p></td>
</tr>
<tr class="row-even"><td><p>Weaviate</p></td>
<td class="text-right"><p>62</p></td>
<td class="text-right"><p>31</p></td>
<td class="text-right"><p>35</p></td>
<td class="text-right"><p>74</p></td>
<td class="text-right"><p>0.001</p></td>
<td class="text-right"><p>55.55</p></td>
<td class="text-right"><p>0.11</p></td>
</tr>
<tr class="row-odd"><td><p>ElasticSearch</p></td>
<td class="text-right"><p>76</p></td>
<td class="text-right"><p>409</p></td>
<td class="text-right"><p>24</p></td>
<td class="text-right"><p>24</p></td>
<td class="text-right"><p>0.002</p></td>
<td class="text-right"><p>4.39</p></td>
<td class="text-right"><p><strong>0.85</strong></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">Default HNSW parameters in QPS</label><div class="tab-content docutils">
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Store</p></th>
<th class="head text-right"><p>Create 1M</p></th>
<th class="head text-right"><p>Read</p></th>
<th class="head text-right"><p>Update</p></th>
<th class="head text-right"><p>Delete</p></th>
<th class="head text-right"><p>Find by condition</p></th>
<th class="head text-right"><p>Find by vector</p></th>
<th class="head text-right"><p>Recall&#64;10</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>None</p></td>
<td class="text-right"><p><strong>1,618,122</strong></p></td>
<td class="text-right"><p><strong>10,101</strong></p></td>
<td class="text-right"><p><strong>71,428</strong></p></td>
<td class="text-right"><p><strong>6,211</strong></p></td>
<td class="text-right"><p><strong>0.192</strong></p></td>
<td class="text-right"><p>0.70</p></td>
<td class="text-right"><p>1.00</p></td>
</tr>
<tr class="row-odd"><td><p>Sqlite</p></td>
<td class="text-right"><p>224</p></td>
<td class="text-right"><p>3,125</p></td>
<td class="text-right"><p>2,824</p></td>
<td class="text-right"><p>59</p></td>
<td class="text-right"><p>0.033</p></td>
<td class="text-right"><p>0.04</p></td>
<td class="text-right"><p>1.00</p></td>
</tr>
<tr class="row-even"><td><p>Annlite</p></td>
<td class="text-right"><p>8,769</p></td>
<td class="text-right"><p>3,759</p></td>
<td class="text-right"><p>106</p></td>
<td class="text-right"><p>49</p></td>
<td class="text-right"><p>0.033</p></td>
<td class="text-right"><p>2.34</p></td>
<td class="text-right"><p>0.14</p></td>
</tr>
<tr class="row-odd"><td><p>Qdrant</p></td>
<td class="text-right"><p>448</p></td>
<td class="text-right"><p>615</p></td>
<td class="text-right"><p>23</p></td>
<td class="text-right"><p>48</p></td>
<td class="text-right"><p>0.002</p></td>
<td class="text-right"><p><strong>111.1</strong></p></td>
<td class="text-right"><p>0.51</p></td>
</tr>
<tr class="row-even"><td><p>Weaviate</p></td>
<td class="text-right"><p>620</p></td>
<td class="text-right"><p>435</p></td>
<td class="text-right"><p>22</p></td>
<td class="text-right"><p>44</p></td>
<td class="text-right"><p>0.001</p></td>
<td class="text-right"><p>200.0</p></td>
<td class="text-right"><p>0.10</p></td>
</tr>
<tr class="row-odd"><td><p>ElasticSearch</p></td>
<td class="text-right"><p>1,398</p></td>
<td class="text-right"><p>481</p></td>
<td class="text-right"><p>64</p></td>
<td class="text-right"><p>30</p></td>
<td class="text-right"><p>0.002</p></td>
<td class="text-right"><p>4.5</p></td>
<td class="text-right"><p><strong>0.83</strong></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="benchmark-setup">
<h2>Benchmark setup<a class="headerlink" href="#benchmark-setup" title="Permalink to this heading">#</a></h2>
<p>We now elaborate the setup of our benchmark. First the following parameters are used:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Number of created Documents</p></td>
<td><p>1,000,000</p></td>
</tr>
<tr class="row-odd"><td><p>Number of Document on task 2,3,4,5,6</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>The dimension of <code class="docutils literal notranslate"><span class="pre">.embedding</span></code></p></td>
<td><p>128</p></td>
</tr>
<tr class="row-odd"><td><p>Number of results for the task Find by vector</p></td>
<td><p>10</p></td>
</tr>
</tbody>
</table>
</div>
<p>We choose 1 million Documents for two reasons: (1) it is the most common data scale for SME. (2) we expect it is a performance-wise breaking point for a production system.</p>
<p>Each Document follows the structure:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>{
  &quot;id&quot;: &quot;94ee6627ee7f582e5e28124e78c3d2f9&quot;,
  &quot;tags&quot;: {&quot;i&quot;: 10},
  &quot;embedding&quot;: [0.49841760378680844, 0.703959752118305, 0.6920759535687985, 0.10248648858410625, ...]
}
</pre></div>
</div>
<p>We use <code class="docutils literal notranslate"><span class="pre">Recall&#64;K</span></code> value as an indicator of the search quality. The in-memory and SQLite store <strong>do not implement</strong> approximate nearest neighbor search but use exhaustive search instead. Hence, they give the maximum <code class="docutils literal notranslate"><span class="pre">Recall&#64;K</span></code> but are the slowest.</p>
<p>The experiments were conducted on a 4.5 Ghz AMD Ryzen Threadripper 3960X 24-Core Processor with Python 3.8.5 and DocArray 0.12.8.</p>
<p>Besides, as Weaviate, Qdrant and ElasticSearch follow a client/server pattern, we set up them with their official
docker images in a <strong>single node</strong> configuration, with 40 GB of RAM allocated. That is, only 1 replica and shard are
operated during the benchmarking. We did not opt for a cluster setup because our benchmarks mainly aim to assess the
capabilities of a single instance of the server.</p>
<p>Results might include overhead coming from DocArray side which applies equally for all backends, unless a specific
backend provides a more efficient implementation.</p>
<section id="settings-of-the-nearest-neighbour-search">
<h3>Settings of the nearest neighbour search<a class="headerlink" href="#settings-of-the-nearest-neighbour-search" title="Permalink to this heading">#</a></h3>
<p>As most of these document stores use their own implementation of HNSW (an approximate nearest neighbor search algorithm) but with different parameters, we conducted two sets of experiment for the Find By Vector task:</p>
<ol class="arabic simple">
<li><p>Set up HNSW with the same set of parameters;</p></li>
<li><p>Set up HNSW with the default parameters specified by each vendor;</p></li>
</ol>
<p>For the first experiment, the following HNSW parameters were fixed for all Document Stores that support ANN:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">ef=100</span></code> at construction</strong>: <code class="docutils literal notranslate"><span class="pre">ef</span></code> at construction controls the index time/index accuracy. Bigger <code class="docutils literal notranslate"><span class="pre">ef</span></code> construction leads to longer construction, but better index quality.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">ef=100</span></code> at search</strong>: the size of the dynamic list for the nearest neighbors. Higher <code class="docutils literal notranslate"><span class="pre">ef</span></code> at search leads to more accurate but slower search.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">m=16</span></code></strong>: max connections, the number of bi-directional links created for every new element during construction. Reasonable range for <code class="docutils literal notranslate"><span class="pre">m</span></code> is 2-100. Higher <code class="docutils literal notranslate"><span class="pre">m</span></code> work better on datasets with high intrinsic dimensionality and/or high recall, while low <code class="docutils literal notranslate"><span class="pre">m</span></code> work better for datasets with low intrinsic dimensionality and/or low recall.</p></li>
</ul>
<p>Finally, the full benchmark script is <a class="reference external" href="https://github.com/jina-ai/docarray/blob/main/scripts/benchmarking.py">available here</a>.</p>
</section>
<section id="rationale-on-the-experiment-design">
<h3>Rationale on the experiment design<a class="headerlink" href="#rationale-on-the-experiment-design" title="Permalink to this heading">#</a></h3>
<p>Our experiments are designed to be fair and the same across all backends while favouring document stores that benefit
DocArray users the most. Note that such a benchmark was impossible to set up before DocArray, as each store has its own API and the definition of a task varies.</p>
<p>Our benchmark is based on the following principles:</p>
<ul class="simple">
<li><p><strong>Cover the most important operations</strong>: We understand that some backends are better at some operations than others, and
some offer better quality. Therefore, we try to benchmark on 6 operations (CRUD + Find by vector + Find by condition)
and report quality measurement (<code class="docutils literal notranslate"><span class="pre">Recall&#64;K</span></code>).</p></li>
<li><p><strong>Not just speed, but also quality</strong>: Since some backends offer better performance and some offer better quality, we make sure to report the quality measurement for the approximate nearest neighbor search. This will allow users to
choose the backend that best suits their cases.</p></li>
<li><p><strong>Same experiment, same API</strong>: DocArray offers the same API across all backends and therefore we built on top of it the
same benchmarking experiment. Furthermore, we made sure to fix the same HNSW parameters for backends that support
approximate nearest neighbor search. All backends are run on official Docker containers, local to the DocArray client
which allows having similar network overhead. We also allocate the same resources for those Docker containers and all
servers are run in a single node setup.</p></li>
<li><p><strong>Benefit the user as much as possible</strong>: We offer the same conditions and resources to all backends, but our experiment
favours the backends that use the resources efficiently. Therefore, some backends might not use the network, or use
GRPC instead of HTTP, or use batch operations. Were okay with that, as long as it benefits the DocArray and Jina
user.</p></li>
<li><p><strong>Open to improvements</strong>: We are constantly improving the performance of storage backends from the DocArray side and
updating the benchmarks accordingly. If you believe we missed an optimization (e.g. perform an operation in batches, benefit from a recent feature in upstream, avoid unnecessary steps), feel free to <a class="reference external" href="https://github.com/jina-ai/docarray/issues/new/choose">raise a PR or issue</a>. Were open to your contributions!</p></li>
</ul>
</section>
<section id="incompleteness-on-the-stores">
<h3>Incompleteness on the stores<a class="headerlink" href="#incompleteness-on-the-stores" title="Permalink to this heading">#</a></h3>
<p>We do not yet cover the following backends for various reasons:</p>
<ul class="simple">
<li><p><strong>Milvus</strong>: currently DocArray does not integrate with Milvus. Were open for contributions to DocArrays repository to
support it.</p></li>
<li><p><strong>Pinecone</strong>: Pinecone support is coming soon. Well add it to these benchmarks once available.</p></li>
<li><p><strong>Faiss, Annoy, Scann</strong>: We do not benchmark algorithms or ANN libraries. We only benchmark backends that can be used as
Document stores. Actually we do not benchmark HNSW itself, but it is used by some backends internally.</p></li>
</ul>
</section>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this heading">#</a></h2>
<p>We hope our benchmark result can help users select the store that suits their use cases. Depending on the dataset size and the needed quality, some stores may be preferable than others.</p>
<p>If youre experimenting on a dataset with fewer than 10,000 Documents, you can use the in-memory DocumentArray as-is to enjoy the best quality for nearest neighbor search with reasonable latency (say, less than 20 ms/query).</p>
<p>If your dataset does not fit in memory, and you <strong>do not</strong> care much about the speed of nearest neighbor search, you can use <code class="docutils literal notranslate"><span class="pre">sqlite</span></code> as storage.</p>
<p>When it comes to finding by vectors, the following figure shows the variation of latency w.r.t. different backend according to the dataset size. The red dashed line represents a time threshold of 0.3s, i.e. 300 ms:</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../../_images/benchmark.svg"><img alt="../../../_images/benchmark.svg" height="7200" src="../../../_images/benchmark.svg" width="24480" /></a>
</figure>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>SQLite store is omitted from the left plot and the in-memory store is omitted from the right plot; because SQLite is too
slow and the in-memory is too fast to fit into the figure.</p>
</div>
<p>AnnLite is a good choice when indexing/appending/inserting speed matters more than the speed of finding. Moreover, AnnLite is a local monolithic package that does not follow a client-server design, so it avoids all network overhead.</p>
<p>Weaviate and Qdrant offer the fastest approximate nearest neighbor search, while ElasticSearch offers a good trade-off between speed and quality. ElasticSearch performs the best in terms of quality of ANN, as we observed with highest Recall&#64;K.</p>
</section>
</section>

                </article>
            </div>
            <footer>
                
                <div class="related-pages">
                    <a class="next-page" href="../../../fundamentals/jina-support/">
                        <div class="page-info">
                            <div class="context">
                                <span>Next</span>
                            </div>
                            <div class="title">Jina</div>
                        </div>
                        <svg class="furo-related-icon">
                            <use href="#svg-arrow-right"></use>
                        </svg>
                    </a>
                    <a class="prev-page" href="../extend/">
                        <svg class="furo-related-icon">
                            <use href="#svg-arrow-right"></use>
                        </svg>
                        <div class="page-info">
                            <div class="context">
                                <span>Previous</span>
                            </div>
                            
                            <div class="title">Add New Document Store</div>
                            
                        </div>
                    </a>
                </div>
                <div class="bottom-of-page">
                    <div class="left-details">
                        <div class="copyright">
                            Copyright &#169; Jina AI Limited. All rights reserved.
                        </div><div class="last-updated">
                            Last updated on Oct 25, 2022</div>
                    </div>
                    <div class="right-details">
                        <div class="social-btns">
                            <a class='social-btn' href="https://github.com/jina-ai/docarray/" aria-label="GitHub"
                               target="_blank" rel="noreferrer"> <i class="fab fa-github"></i></a>
                            <a class='social-btn' href="https://slack.jina.ai" aria-label="Slack" target="_blank"
                               rel="noreferrer"> <i class="fab fa-slack"></i></a>
                            <a class='social-btn' href="https://youtube.com/c/jina-ai" aria-label="YouTube"
                               target="_blank" rel="noreferrer"> <i class="fab fa-youtube"></i></a>
                            <a class='social-btn' href="https://twitter.com/JinaAI_" aria-label="Twitter"
                               target="_blank" rel="noreferrer"> <i class="fab fa-twitter"></i></a>
                            <a class='social-btn' href="https://www.linkedin.com/company/jinaai/" aria-label="LinkedIn"
                               target="_blank" rel="noreferrer"> <i class="fab fa-linkedin"></i></a>
                        </div>
                    </div>
                </div>
                
            </footer>
        </div>
        <aside class="toc-drawer">
            
            
            <div class="toc-sticky toc-scroll">
                <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
                </div>
                <div class="toc-tree-container">
                    <div class="toc-tree">
                        <ul>
<li><a class="reference internal" href="#">One Million Scale Benchmark</a><ul>
<li><a class="reference internal" href="#benchmark-result">Benchmark result</a></li>
<li><a class="reference internal" href="#benchmark-setup">Benchmark setup</a><ul>
<li><a class="reference internal" href="#settings-of-the-nearest-neighbour-search">Settings of the nearest neighbour search</a></li>
<li><a class="reference internal" href="#rationale-on-the-experiment-design">Rationale on the experiment design</a></li>
<li><a class="reference internal" href="#incompleteness-on-the-stores">Incompleteness on the stores</a></li>
</ul>
</li>
<li><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>

                    </div>
                </div>
            </div>
            
            
        </aside>
    </div>
    <qa-bot
            title="DocArray Bot"
            description="The data structure for unstructured data"
    >
        <template>
            <dl>
                <dt>You can ask questions about our docs. Try:</dt>
                <dd>What is a DocumentArray?</dd>
                <dd>How to use docarray with Jina?</dd>
                <dd>How to find nearest neighbour of Documents?</dd>
            </dl>
        </template>
    </qa-bot>
</div>
<img referrerpolicy="no-referrer-when-downgrade"
     src="https://static.scarf.sh/a.png?x-pxid=2823e771-0e1e-4320-8fde-48bc48e53262"/><script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/tabs.js"></script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() { 
            document.querySelector('qa-bot').setAttribute('server', 'https://jina-ai-docarray.docsqa.jina.ai');
        });
        </script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qabot@0.4"></script>
    </body>
</html>