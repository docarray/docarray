
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="DocArray, DocArray is a library for representing, sending and storing multi-modal data, with a focus on applications in ML and Neural Search.">
      
      
      
        <link rel="canonical" href="https://docs.docarray.org/how_to/add_doc_index/">
      
      
        <link rel="prev" href="../../user_guide/storing/doc_store/store_s3/">
      
      
        <link rel="next" href="../multimodal_training_and_serving/">
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.3">
    
    
      
        <title>Add a new Document Index - DocArray</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.c4a75a56.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-HTTNBRW3Z2"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-HTTNBRW3Z2",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-HTTNBRW3Z2",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#add-a-new-document-index" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="DocArray" class="md-header__button md-logo" aria-label="DocArray" data-md-component="logo">
      
  <img src="../../assets/docarray-dark.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DocArray
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Add a new Document Index
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/docarray/docarray" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    docarray/docarray
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="DocArray" class="md-nav__button md-logo" aria-label="DocArray" data-md-component="logo">
      
  <img src="../../assets/docarray-dark.svg" alt="logo">

    </a>
    DocArray
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/docarray/docarray" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    docarray/docarray
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        DocArray
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          User Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/intro/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          Representing data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Representing data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/representing/first_step/" class="md-nav__link">
        Document
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/representing/array/" class="md-nav__link">
        Array of documents
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          Sending data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Sending data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/sending/first_step/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/sending/serialization/" class="md-nav__link">
        Serialization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/sending/api/jina/" class="md-nav__link">
        Send over Jina
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/sending/api/fastAPI/" class="md-nav__link">
        Send over FastAPI
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          Storing data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          Storing data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/storing/first_step/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_4_2" id="__nav_2_4_2_label" tabindex="0">
          DocIndex - Vector search
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_2">
          <span class="md-nav__icon md-icon"></span>
          DocIndex - Vector search
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/storing/docindex/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/storing/index_in_memory/" class="md-nav__link">
        In-Memory Document Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/storing/index_hnswlib/" class="md-nav__link">
        Hnswlib Document Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/storing/index_epsilla/" class="md-nav__link">
        Epsilla Document Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/storing/index_weaviate/" class="md-nav__link">
        Weaviate Document Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/storing/index_elastic/" class="md-nav__link">
        Elasticsearch Document Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/storing/index_qdrant/" class="md-nav__link">
        Qdrant Document Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/storing/index_redis/" class="md-nav__link">
        Redis Document Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/storing/index_milvus/" class="md-nav__link">
        Milvus Document Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/storing/nested_data/" class="md-nav__link">
        Nested Data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_4_3" id="__nav_2_4_3_label" tabindex="0">
          DocStore - Bulk storage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_3">
          <span class="md-nav__icon md-icon"></span>
          DocStore - Bulk storage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/storing/doc_store/store_file/" class="md-nav__link">
        Store on-disk
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/storing/doc_store/store_jac.md" class="md-nav__link">
        None
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/storing/doc_store/store_s3/" class="md-nav__link">
        Store on S3
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          How-to
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          How-to
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Add a new Document Index
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Add a new Document Index
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation-and-user-instructions" class="md-nav__link">
    Installation and user instructions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-new-document-index-class" class="md-nav__link">
    Create a new Document Index class
  </a>
  
    <nav class="md-nav" aria-label="Create a new Document Index class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-the-constructor" class="md-nav__link">
    Create the constructor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-up-your-backend" class="md-nav__link">
    Set up your backend
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-_schema" class="md-nav__link">
    The _schema
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-_db_config" class="md-nav__link">
    The _db_config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-_runtime_config" class="md-nav__link">
    The _runtime_config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-_column_infos" class="md-nav__link">
    The _column_infos
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#properly-handle-n_dim" class="md-nav__link">
    Properly handle n_dim
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#declare-default-configurations" class="md-nav__link">
    Declare default configurations
  </a>
  
    <nav class="md-nav" aria-label="Declare default configurations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-dbconfig-class" class="md-nav__link">
    The DBConfig class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-runtimeconfig-class" class="md-nav__link">
    The RuntimeConfig class
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implement-abstract-methods-for-indexing-searching-and-deleting" class="md-nav__link">
    Implement abstract methods for indexing, searching, and deleting
  </a>
  
    <nav class="md-nav" aria-label="Implement abstract methods for indexing, searching, and deleting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-python_type_to_db_type-method" class="md-nav__link">
    The python_type_to_db_type() method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-_index-method" class="md-nav__link">
    The _index() method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-_filter_by_parent_id-method" class="md-nav__link">
    The _filter_by_parent_id() method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-index_name-property" class="md-nav__link">
    The index_name() property
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implement-a-query-builder-for-your-document-index" class="md-nav__link">
    Implement a Query Builder for your Document Index
  </a>
  
    <nav class="md-nav" aria-label="Implement a Query Builder for your Document Index">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implement-the-querybuilder-class" class="md-nav__link">
    Implement the QueryBuilder class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implement-individual-query-methods" class="md-nav__link">
    Implement individual query methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implement-the-build-method" class="md-nav__link">
    Implement the build() method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implement-the-execute_query-method" class="md-nav__link">
    Implement the execute_query() method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multimodal_training_and_serving/" class="md-nav__link">
        Multimodal deep learning with DocArray
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../optimize_performance_with_id_generation/" class="md-nav__link">
        Optimize performance
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Data Types
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Data Types
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_types/first_steps/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_types/text/text/" class="md-nav__link">
        🔤 Text
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_types/image/image/" class="md-nav__link">
        🖼️ Image
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_types/audio/audio/" class="md-nav__link">
        🔊 Audio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_types/video/video/" class="md-nav__link">
        🎥 Video
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_types/3d_mesh/3d_mesh/" class="md-nav__link">
        🧬 3D Mesh
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_types/table/table/" class="md-nav__link">
        📊 Table
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_types/multimodal/multimodal/" class="md-nav__link">
        🗃 Multimodal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_types/tensor/tensor/" class="md-nav__link">
        🔢 Tensor
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../migration_guide/" class="md-nav__link">
        Migration guide
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          API reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          API reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
          Array
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          Array
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/array/any_da/" class="md-nav__link">
        AnyDocArray
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/array/da/" class="md-nav__link">
        DocList
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/array/da_stack/" class="md-nav__link">
        DocVec
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
          Base doc
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          Base doc
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/base_doc/base_doc/" class="md-nav__link">
        BaseDoc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
          Data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/data/data/" class="md-nav__link">
        TorchDataset
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
          Doc index
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_4">
          <span class="md-nav__icon md-icon"></span>
          Doc index
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/doc_index/doc_index/" class="md-nav__link">
        DocIndex
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6_4_2" id="__nav_6_4_2_label" tabindex="0">
          Backends
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_4_2">
          <span class="md-nav__icon md-icon"></span>
          Backends
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/doc_index/backends/elastic/" class="md-nav__link">
        ElasticDocIndex
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/doc_index/backends/elastic7/" class="md-nav__link">
        ElasticV7DocIndex
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/doc_index/backends/epsilla/" class="md-nav__link">
        EpsillaDocumentIndex
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/doc_index/backends/hnswlib/" class="md-nav__link">
        HnswDocumentIndex
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/doc_index/backends/in_memory/" class="md-nav__link">
        In memory
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/doc_index/backends/milvus/" class="md-nav__link">
        MilvusDocumentIndex
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/doc_index/backends/qdrant/" class="md-nav__link">
        QdrantDocumentIndex
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/doc_index/backends/redis/" class="md-nav__link">
        RedisDocumentIndex
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/doc_index/backends/weaviate/" class="md-nav__link">
        WeaviateDocumentIndex
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_5" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0">
          Doc store
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_5">
          <span class="md-nav__icon md-icon"></span>
          Doc store
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/doc_store/doc_store/" class="md-nav__link">
        DocStore
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/doc_store/file_doc_store/" class="md-nav__link">
        FileDocStore
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/doc_store/s3_doc_store/" class="md-nav__link">
        S3DocStore
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_6" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="0">
          Documents
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_6">
          <span class="md-nav__icon md-icon"></span>
          Documents
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/documents/documents/" class="md-nav__link">
        Documents
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_7" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6_7" id="__nav_6_7_label" tabindex="0">
          Typing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_7">
          <span class="md-nav__icon md-icon"></span>
          Typing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/typing/bytes/" class="md-nav__link">
        Bytes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/typing/id/" class="md-nav__link">
        Id
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/typing/url/" class="md-nav__link">
        Url
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_7_4" >
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6_7_4" id="__nav_6_7_4_label" tabindex="0">
          Tensor
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_7_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_7_4">
          <span class="md-nav__icon md-icon"></span>
          Tensor
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/typing/tensor/audio/" class="md-nav__link">
        AudioTensor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/typing/tensor/embedding/" class="md-nav__link">
        Embedding
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/typing/tensor/image/" class="md-nav__link">
        ImageTensor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/typing/tensor/tensor/" class="md-nav__link">
        Tensor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/typing/tensor/video/" class="md-nav__link">
        VideoTensor
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_8" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6_8" id="__nav_6_8_label" tabindex="0">
          Utils
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_8">
          <span class="md-nav__icon md-icon"></span>
          Utils
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/utils/filter/" class="md-nav__link">
        filter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/utils/find/" class="md-nav__link">
        find
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/utils/maps_docs/" class="md-nav__link">
        map
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API_reference/utils/reduce/" class="md-nav__link">
        reduce
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../CONTRIBUTING/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation-and-user-instructions" class="md-nav__link">
    Installation and user instructions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-new-document-index-class" class="md-nav__link">
    Create a new Document Index class
  </a>
  
    <nav class="md-nav" aria-label="Create a new Document Index class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-the-constructor" class="md-nav__link">
    Create the constructor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-up-your-backend" class="md-nav__link">
    Set up your backend
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-_schema" class="md-nav__link">
    The _schema
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-_db_config" class="md-nav__link">
    The _db_config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-_runtime_config" class="md-nav__link">
    The _runtime_config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-_column_infos" class="md-nav__link">
    The _column_infos
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#properly-handle-n_dim" class="md-nav__link">
    Properly handle n_dim
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#declare-default-configurations" class="md-nav__link">
    Declare default configurations
  </a>
  
    <nav class="md-nav" aria-label="Declare default configurations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-dbconfig-class" class="md-nav__link">
    The DBConfig class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-runtimeconfig-class" class="md-nav__link">
    The RuntimeConfig class
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implement-abstract-methods-for-indexing-searching-and-deleting" class="md-nav__link">
    Implement abstract methods for indexing, searching, and deleting
  </a>
  
    <nav class="md-nav" aria-label="Implement abstract methods for indexing, searching, and deleting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-python_type_to_db_type-method" class="md-nav__link">
    The python_type_to_db_type() method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-_index-method" class="md-nav__link">
    The _index() method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-_filter_by_parent_id-method" class="md-nav__link">
    The _filter_by_parent_id() method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-index_name-property" class="md-nav__link">
    The index_name() property
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implement-a-query-builder-for-your-document-index" class="md-nav__link">
    Implement a Query Builder for your Document Index
  </a>
  
    <nav class="md-nav" aria-label="Implement a Query Builder for your Document Index">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implement-the-querybuilder-class" class="md-nav__link">
    Implement the QueryBuilder class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implement-individual-query-methods" class="md-nav__link">
    Implement individual query methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implement-the-build-method" class="md-nav__link">
    Implement the build() method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implement-the-execute_query-method" class="md-nav__link">
    Implement the execute_query() method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<div><h1 id="add-a-new-document-index">Add a new Document Index</h1>
<p>In DocArray a <em>Document Index</em> is a class that takes documents, optionally persists them,
and makes them searchable. Different Document Indexes leverage different backends, like Weaviate, Qdrant, HNSWLib etc.</p>
<p>This document shows covers adding a new Document Index to DocArray.</p>
<p>This can be broken down into a number of steps:</p>
<ol>
<li>Install and user instructions</li>
<li>Create a new class that inherits from <code>BaseDocIndex</code></li>
<li>Declare default configurations for your Document Index</li>
<li>Implement abstract methods for indexing, searching, and deleting</li>
<li>Implement a Query Builder for your Document Index</li>
</ol>
<p>In general, the steps above can be followed in roughly that order.</p>
<p>However, a Document Index implementation is usually very interconnected, so you will probably have to jump between these steps a bit,
both in your implementation and in the guide below.</p>
<p>For an end-to-end example of this process, check out the <a href="https://github.com/docarray/docarray/pull/1124">existing HNSWLib Document Index implementation</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Caution</strong>: The HNSWLib Document Index implementation can be used as a reference, but it is special in some key ways.
For example, HNSWLib can only index vectors, so it uses SQLite to store the rest of the documents alongside it.
This is <em>not</em> how you should store documents in your implementation! You can find guidance on how you <em>should</em> do it below.</p>
</div>
<h2 id="installation-and-user-instructions">Installation and user instructions</h2>
<p>Add the library required for your Index via poetry:</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>poetry<span class="w"> </span>add<span class="w"> </span><span class="o">{</span>my_index_lib<span class="o">}</span>
</span></code></pre></div>
<p>The <code>pyproject.toml</code> file should now look like this:</p>
<div class="language-toml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">[tool.poetry.dependencies]</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">my_index_lib</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"&gt;=123.456.789"</span>
</span></code></pre></div>
<p>Mark the library as optional and manually create an <code>extra</code> for it:</p>
<div class="language-toml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">[tool.poetry.dependencies]</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">my_index_lib</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"&gt;=0.6.2"</span><span class="p">,</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">true</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="k">[tool.poetry.extras]</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="n">my_index_extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">"my_index_lib"</span><span class="p">]</span>
</span></code></pre></div>
<p>In case the user tries to use your Index without the correct installs, we want to throw an error with corresponding instructions.</p>
<p>To enable this, first, add instructions to the <code>INSTALL_INSTRUCTIONS</code> dictionary in <code>docarray/utils/misc.py</code>, such as </p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="p">{</span><span class="s1">'my_index_lib'</span><span class="p">:</span> <span class="s1">'"docarray[my_index_extra]"'</span><span class="p">}</span>
</span></code></pre></div>
<p>Next, ensure you add a case to the <code>__getattr__()</code> in <code>docarray/index/__init__.py</code> for your new Index. By doing so, the user will be given the instructions when trying to import <code>MyIndex</code> without the correct libraries installed.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>    <span class="kn">from</span> <span class="nn">docarray.index.backends.my_index</span> <span class="kn">import</span> <span class="n">MyIndex</span>  <span class="c1"># noqa: F401</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">'HnswDocumentIndex'</span><span class="p">:</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>        <span class="n">import_library</span><span class="p">(</span><span class="s1">'hnswlib'</span><span class="p">,</span> <span class="n">raise_error</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>        <span class="kn">from</span> <span class="nn">docarray.index.backends.my_index</span> <span class="kn">import</span> <span class="n">MyIndex</span>  <span class="c1"># noqa</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>        <span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'MyIndex'</span><span class="p">)</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>        <span class="k">return</span> <span class="n">MyIndex</span>
</span></code></pre></div>
<p>Additionally, wrap the required imports in the file where the <code>MyIndex</code> class will be located, like it is done in <code>docarray/index/backends/hnswlib.py</code>.</p>
<h2 id="create-a-new-document-index-class">Create a new Document Index class</h2>
<p>To get started, create a new class that inherits from <code>BaseDocIndex</code> and <code>typing.Generic</code>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">TSchema</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">'TSchema'</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">BaseDoc</span><span class="p">)</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="k">class</span> <span class="nc">MyDocumentIndex</span><span class="p">(</span><span class="n">BaseDocIndex</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">TSchema</span><span class="p">]):</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>    <span class="o">...</span>
</span></code></pre></div>
<p>Here, <code>TSchema</code> is a type variable representing the schema of the Document Index, which is a <code>Document</code>.
You can use it in type hints of methods and attributes.</p>
<h3 id="create-the-constructor">Create the constructor</h3>
<p>You can write an <code>__init__</code> method for your Document Index where you set up all the needed bells and whistles:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">db_config</span><span class="o">=</span><span class="n">db_config</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>    <span class="o">...</span>
</span></code></pre></div>
<p>Ensure you call the <code>super().__init__</code> method, which will do some basic initialization for you.</p>
<h3 id="set-up-your-backend">Set up your backend</h3>
<p>Your backend (database or similar) should represent documents in the following way:</p>
<ul>
<li>Every field of a document is a column in the database.</li>
<li>Column types follow a default that you define, based on the type hint of the associated field, but can also be configured by the user.</li>
<li>Every row in your database thus represents a document.</li>
<li><strong>Nesting:</strong> The most common way to handle nested documents (and the one where the <code>AbstractDocumentIndex</code> will hold your hand the most), is to flatten out nested documents. But if your backend natively supports nesting representations, then feel free to leverage those!</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Don't take too much inspiration from the HNSWLib Document Index implementation on this point, as it is a bit of a special case.</p>
</div>
<p>Also, check the Document Index is being set up "fresh", meaning no data was previously persisted.
Then create a new database table (or the equivalent concept in you backend) for the documents, otherwise, the Document Index should connect to the existing database and table.
You can determine this based on <code>self._db_config</code> (see below).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are integrating a database, your Document Index should always assume there is already a database running that it can connect to.
It should <em>not</em> spawn a new database instance.</p>
</div>
<p>To help with all of this, <code>super().__init__</code> inject a few helpful attributes for you (more info in the dedicated sections below):</p>
<ul>
<li><code>self._schema</code></li>
<li><code>self._db_config</code></li>
<li><code>self._runtime_config</code></li>
<li><code>self._column_infos</code></li>
</ul>
<h3 id="the-_schema">The <code>_schema</code></h3>
<p>When a user instantiates a Document Index, they do so in a parametric way:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">class</span> <span class="nc">Inner</span><span class="p">(</span><span class="n">BaseDoc</span><span class="p">):</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>    <span class="n">embedding</span><span class="p">:</span> <span class="n">NdArray</span><span class="p">[</span><span class="mi">512</span><span class="p">]</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="k">class</span> <span class="nc">MyDoc</span><span class="p">(</span><span class="n">BaseDoc</span><span class="p">):</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>    <span class="n">tensor</span><span class="p">:</span> <span class="n">NdArray</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>    <span class="n">other_tensor</span><span class="p">:</span> <span class="n">NdArray</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">space</span><span class="o">=</span><span class="s1">'cosine'</span><span class="p">)</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>    <span class="n">inner</span><span class="p">:</span> <span class="n">Inner</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="n">store</span> <span class="o">=</span> <span class="n">MyDocumentIndex</span><span class="p">[</span><span class="n">MyDoc</span><span class="p">]()</span>
</span></code></pre></div>
<p>In this case, <code>store</code> would have a class attribute <code>_schema</code> that is the <code>MyDoc</code> class.
This is done automatically for you, and you can use it in your implementation.</p>
<h3 id="the-_db_config">The <code>_db_config</code></h3>
<p>The <code>_db_config</code> is a dataclass that contains all "static" configurations of your Document Index.
Users can pass these configurations to the <code>__init__</code> method of your Document Index, and <code>self._db_config</code> will be populated
for you, so that you can use it in your implementation.</p>
<p>You can declare allowed fields and default values for your <code>_db_config</code>, but you will see that later.</p>
<h3 id="the-_runtime_config">The <code>_runtime_config</code></h3>
<p>The <code>_runtime_config</code> is a dataclass that contains all "dynamic" configurations of your Document Index.
Users can pass these configurations to the <code>.configure()</code> method of your Document Index, and <code>self._runtime_config</code> will be populated
for you, so that you can use it in your implementation.</p>
<p>You can declare allowed fields and default values for your <code>_runtime_config</code>, but you will see that later.</p>
<h3 id="the-_column_infos">The <code>_column_infos</code></h3>
<p><code>self._column_infos</code> is a dictionary that contains information about all columns in your Document Index instance.</p>
<p>This information is automatically extracted from <code>self._schema</code>, and populated for you.</p>
<p>Concretely, <code>self._column_infos: Dict[str, _ColumnInfo]</code> maps from a column name to a <code>_ColumnInfo</code> dataclass.</p>
<p>For the <code>MyDoc</code> schema above, the column names would be <code>tensor</code>, <code>other_tensor</code>, <code>description</code>, <code>id</code>, <code>inner__embedding</code>, and <code>inner__id</code>.
These are the key of <code>self._column_infos</code>.</p>
<p>The values of <code>self._column_infos</code> are <code>_ColumnInfo</code> dataclasses, which have the following form:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nd">@dataclass</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="k">class</span> <span class="nc">_ColumnInfo</span><span class="p">:</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>    <span class="n">docarray_type</span><span class="p">:</span> <span class="n">Type</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>    <span class="n">db_type</span><span class="p">:</span> <span class="n">Any</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>    <span class="n">n_dim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>    <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
</span></code></pre></div>
<ul>
<li><code>docarray_type</code> is the type of the column in DocArray, e.g. <code>AbstractTensor</code> or <code>str</code></li>
<li><code>db_type</code> is the type of the column in the Document Index, e.g. <code>np.ndarray</code> or <code>str</code>. You can customize the mapping from <code>docarray_type</code> to <code>db_type</code>, as we will see later.</li>
<li><code>config</code> is a dictionary of configurations for the column. For example, the <code>other_tensor</code> column above would contain the <code>space</code> and <code>dim</code> configurations.</li>
<li><code>n_dim</code> is the dimensionality of the column, e.g. <code>100</code> for a 100-dimensional vector. See further guidance on this below.</li>
</ul>
<p>Again, these are automatically populated for you, so you can just use them in your implementation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>_ColumnInfo.docarray_type</code> contains the python type as specified in <code>self._schema</code>, whereas 
<code>_ColumnInfo.db_type</code> contains the data type of a particular database column.</p>
<p>By default, it holds that <code>_ColumnInfo.docarray_type == self.python_type_to_db_type(_ColumnInfo.db_type)</code>, as we will see later.
However, you should not rely on this, because a user can manually specify a different db_type. 
Therefore, your implementation should rely on <code>_ColumnInfo.db_type</code> and not directly call <code>python_type_to_db_type()</code>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If a subclass of <code>AbstractTensor</code> appears in the Document Index's schema (i.e. <code>TorchTensor</code>, <code>NdArray</code>, or <code>TensorFlowTensor</code>), then <code>_ColumnInfo.docarray_type</code> will simply show <code>AbstractTensor</code> instead of the specific subclass. This is because the abstract class normalizes all input data of type <code>AbstractTensor</code> to <code>np.ndarray</code> anyways, which should make your life easier. Just be sure to properly handle <code>AbstractTensor</code> as a possible value or <code>_ColumnInfo.docarray_type</code>, and you won't have to worry about the differences between torch, tf, and np.</p>
</div>
<h3 id="properly-handle-n_dim">Properly handle <code>n_dim</code></h3>
<p><code>_ColumnInfo.n_dim</code> is automatically obtained from type parametrizations of the form <code>NdArray[100]</code>;
if there isn't such a parametrization, <code>n_dim</code> of the columns will be <code>None</code>.</p>
<p>You should also provide another way of defining the dimensionality of your columns, specifically by exposing a parameter in <code>Field(...)</code> (see example schema at the top).</p>
<p>This leads to four possible scenarios:</p>
<p><strong>Scenario 1: Only <code>n_dim</code> is defined</strong></p>
<p>Imagine the user defines this schema:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="k">class</span> <span class="nc">MyDoc</span><span class="p">(</span><span class="n">BaseDoc</span><span class="p">):</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>    <span class="n">tensor</span><span class="p">:</span> <span class="n">NdArray</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="n">index</span> <span class="o">=</span> <span class="n">MyDocumentIndex</span><span class="p">[</span><span class="n">MyDoc</span><span class="p">]()</span>
</span></code></pre></div>
<p>In that case, the following will be true: <code>self._column_infos['tensor'].n_dim == 100</code> and <code>self._column_infos['tensor'].config == {}</code>.
The <code>tensor</code> column in your backend should be configured to have dimensionality <code>100</code>.</p>
<p><strong>Scenario 2: Only <code>Field(...)</code> is defined</strong></p>
<p>Now, imagine the user defines <em>this</em> schema:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">class</span> <span class="nc">MyDoc</span><span class="p">(</span><span class="n">BaseDoc</span><span class="p">):</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    <span class="n">tensor</span><span class="p">:</span> <span class="n">NdArray</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="n">index</span> <span class="o">=</span> <span class="n">MyDocumentIndex</span><span class="p">[</span><span class="n">MyDoc</span><span class="p">]()</span>
</span></code></pre></div>
<p>In that case, <code>self._column_infos['tensor'].n_dim is None</code> and <code>self._column_infos['tensor'].config['dim'] == 50</code>.
The <code>tensor</code> column in your backend should be configured to have dimensionality <code>50</code>.</p>
<p><strong>Scenario 3: Both <code>n_dim</code> and <code>Field(...)</code> are defined</strong></p>
<p>Now, imagine this schema:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">class</span> <span class="nc">MyDoc</span><span class="p">(</span><span class="n">BaseDoc</span><span class="p">):</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>    <span class="n">tensor</span><span class="p">:</span> <span class="n">NdArray</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="n">index</span> <span class="o">=</span> <span class="n">MyDocumentIndex</span><span class="p">[</span><span class="n">MyDoc</span><span class="p">]()</span>
</span></code></pre></div>
<p>In this case, <code>self._column_infos['tensor'].n_dim == 100</code> and <code>self._column_infos['tensor'].config['dim'] == 50</code>.
The <code>tensor</code> column in your backend should be configured to have dimensionality <code>100</code>, as <strong><code>n_dim</code> takes precedence over <code>Field(...)</code></strong>.</p>
<p><strong>Scenario 4: Neither <code>n_dim</code> nor <code>Field(...)</code> are defined</strong></p>
<p>Finally, imagine this:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="k">class</span> <span class="nc">MyDoc</span><span class="p">(</span><span class="n">BaseDoc</span><span class="p">):</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>    <span class="n">tensor</span><span class="p">:</span> <span class="n">NdArray</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="n">index</span> <span class="o">=</span> <span class="n">MyDocumentIndex</span><span class="p">[</span><span class="n">MyDoc</span><span class="p">]()</span>
</span></code></pre></div>
<p>In this case, <code>self._column_infos['tensor'].n_dim is None</code> and <code>self._column_infos['tensor'].config == {}</code>.
If your backend can handle tensor/embedding columns without defined dimensionality, you should leverage that mechanism.
Otherwise, raise an Exception.</p>
<h2 id="declare-default-configurations">Declare default configurations</h2>
<p>We have already made reference to the <code>_db_config</code> and <code>_runtime_config</code> attributes.</p>
<p>To define what can be stored in them, and what the default values are, you need to create two inner classes:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nd">@dataclass</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="k">class</span> <span class="nc">DBConfig</span><span class="p">(</span><span class="n">BaseDocIndex</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">):</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>    <span class="n">default_column_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Type</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="o">...</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="nd">@dataclass</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="k">class</span> <span class="nc">RuntimeConfig</span><span class="p">(</span><span class="n">BaseDocIndex</span><span class="o">.</span><span class="n">RuntimeConfig</span><span class="p">):</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>    <span class="o">...</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><code>DBConfig</code> inherits from <code>BaseDocIndex.DBConfig</code> and <code>RuntimeConfig</code> inherits from <code>BaseDocIndex.RuntimeConfig</code></li>
<li>All fields in each dataclass need to have default values. Choose these sensibly, as they will be used if the user does not specify a value.</li>
</ul>
</div>
<h3 id="the-dbconfig-class">The <code>DBConfig</code> class</h3>
<p>The <code>DBConfig</code> class defines the static configurations of your Document Index.
These are configurations that are tied to the database (or library) running in the background, such as <code>host</code>, <code>port</code>, etc.
Here you should put everything that the user cannot or should not change after initialization.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Every <code>DBConfig</code> needs to contain a <code>default_column_config</code> field.
This is a dictionary that, for each possible column type in your database, defines a default configuration for that column type.
This will automatically be passed to a <code>_ColumnInfo</code> whenever a user does not manually specify a configuration for that column.</p>
<p>For example, in the <code>MyDoc</code> schema above, the <code>tensor</code> <code>_ColumnInfo</code> would have a default configuration specified for <code>np.ndarray</code> columns.</p>
</div>
<p>What is actually contained in these type-dependant configurations is up to you (and database specific).
For example, for <code>np.ndarray</code> columns you could define the configurations <code>index_type</code> and <code>metric_type</code>,
and for <code>varchar</code> columns you could define a <code>max_length</code> configuration.</p>
<p>It is probably best to see this in action, so you should check out the <code>HnswDocumentIndex</code> implementation.</p>
<h3 id="the-runtimeconfig-class">The <code>RuntimeConfig</code> class</h3>
<p>The <code>RuntimeConfig</code> class defines the dynamic configurations of your Document Index.
These are configurations that can be changed at runtime, for example default behaviours such as batch sizes, consistency levels, etc.</p>
<p>It is a common pattern to allow such parameters both in the <code>RuntimeConfig</code>, where they will act as global defaults, and
in specific methods (<code>index</code>, <code>find</code>, etc.), where they will act as local overrides.</p>
<h2 id="implement-abstract-methods-for-indexing-searching-and-deleting">Implement abstract methods for indexing, searching, and deleting</h2>
<p>After you've done the basic setup above, you can jump into the good stuff: implementing the actual indexing, searching, and deleting.</p>
<p>In general, the following is true:</p>
<ul>
<li>For every method that you need to implement, there is a public variant (e.g. <code>index</code>) and a private variant (e.g. <code>_index</code>)</li>
<li>You should usually implement the private variant, which is called by the already-implemented public variant. This should make your life easier, because some preprocessing and data normalization will already be done for you.</li>
<li>You can, however, also implement the public variant directly, if you want to do something special.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>While implementing the public variant directly is a perfectly fine thing to do, it may create more maintenance work for you in the future, because the public variant defined in the <code>BaseDocIndex</code> might change in the future, and you will have to update your implementation accordingly.</p>
</div>
<p>Further:</p>
<ul>
<li>You don't absolutely have to implement everything. If a feature (e.g. <code>text_search</code>) is not supported by your backend, just raise a <code>NotImplementedError</code> in the corresponding method.</li>
<li>Many methods come in a "singular" variant (e.g. <code>find</code>) and a "batched" variant (e.g. <code>find_batched</code>).</li>
<li>The "singular" variant expects a single input, be it an ANN query, a text query, a filter, etc., and return matches and scores for that single input</li>
<li>The "batched" variant expects a batch of inputs, and returns of matches and scores for each input</li>
<li>Your implementations of, e.g., <code>_find()</code>, <code>_index()</code> etc. are allowed to take additional optional keyword arguments.
  These can then be used to control DB specific behaviours, such as consistency levels, batch sizes, etc. As mentioned above, it is good practice to mirror these arguments in <code>self.RuntimeConfig</code>.</li>
</ul>
<p>Overall, you're asked to implement the methods that appear after the <code>Abstract methods; Subclasses must implement these</code>
comment in the <code>BaseDocIndex</code> class.
The details of each method should become clear from the docstrings and type hints.</p>
<h3 id="the-python_type_to_db_type-method">The <code>python_type_to_db_type()</code> method</h3>
<p>This method is slightly special, because </p>
<ol>
<li>It is not exposed to the user</li>
<li>You absolutely have to implement it</li>
</ol>
<p>It is intended to take a type of a field in the store's schema (e.g. <code>AbstractTensor</code> for <code>tensor</code>), and return the corresponding type in the database (e.g. <code>np.ndarray</code>).</p>
<p>The <code>BaseDocIndex</code> class uses this information to create and populate the <code>_ColumnInfo</code>s in <code>self._column_infos</code>.</p>
<p>If the user wants to change the default behaviour, one can set the db type by using the <code>col_type</code> field:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="k">class</span> <span class="nc">MySchema</span><span class="p">(</span><span class="n">BaseDoc</span><span class="p">):</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>    <span class="n">my_num</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">col_type</span><span class="o">=</span><span class="s1">'float64'</span><span class="p">)</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>    <span class="n">my_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">col_type</span><span class="o">=</span><span class="s1">'varchar'</span><span class="p">,</span> <span class="n">max_len</span><span class="o">=</span><span class="mi">2048</span><span class="p">)</span>
</span></code></pre></div>
<p>In this case, the <code>db_type</code> of <code>my_num</code> will be <code>'float64'</code> and the <code>db_type</code> of <code>my_text</code> will be <code>'varchar'</code>. 
Additional information regarding the <code>col_type</code>, such as <code>max_len</code> for <code>varchar</code> will be stored in the <code>_ColumnsInfo.config</code>.
The given <code>col_type</code> has to be a valid <code>db_type</code>, meaning that has to be described in the index's <code>DBConfig.default_column_config</code>.</p>
<h3 id="the-_index-method">The <code>_index()</code> method</h3>
<p>When indexing documents, your implementation should behave in the following way:</p>
<ul>
<li>Every field in the Document is mapped to a column in the database</li>
<li>This includes the <code>id</code> field, which is mapped to the primary key of the database (if your backend has such a concept)</li>
<li>The configuration of that column can be found in <code>self._column_infos[field_name].config</code></li>
<li>In DocArray &lt;=0.21, we used to store a serialized representation of every document. This is not needed anymore, as every row in your database table should fully represent a single indexed document.</li>
</ul>
<p>To handle nested documents, the public <code>index()</code> method already flattens every incoming document for you.
This means that <code>_index()</code> already receives a flattened representation of the data, and you don't need to worry about that.</p>
<p>Concretely, the <code>_index()</code> method takes as input a dictionary of column names to column data, flattened out.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you (or your backend) prefer to do bulk indexing on row-wise data, then you can use the <code>self._transpose_col_value_dict()</code>
helper method. Inside of <code>_index()</code> you can use this to transform <code>column_to_data</code> into a row-wise view of the data.</p>
</div>
<p><strong>If your backend has native nesting capabilities:</strong> You can also ignore most of the above, and implement the public <code>index()</code> method directly.
That way you have full control over whether the input data gets flattened or not.</p>
<p><strong>The <code>.id</code> field:</strong> Every Document has an <code>.id</code> field, which is intended to act as a unique identifier or primary key
in your backend, if such a concept exists in your case. In your implementation you can assume that <code>.id</code>s are <strong>unique</strong> and <strong>non-empty</strong>.
(Strictly speaking, this uniqueness property is not guaranteed, since a user could override the auto-generated <code>.id</code> field with a custom value.
If your implementation encounters a duplicate <code>.id</code>, it is okay to fail and raise an Exception.)</p>
<h3 id="the-_filter_by_parent_id-method">The <code>_filter_by_parent_id()</code> method</h3>
<p>The default implementatin return <code>None</code>. You can choose to override this function with database specific filter API when needed. 
This function should return a list of ids of subindex level documents given the id of root document.</p>
<h3 id="the-index_name-property">The <code>index_name()</code> property</h3>
<p>The <code>index_name</code> property is used in the initialization of subindices, and the default implementation is empty. This function should return the name of the index. And if the property of the index name in your backend is not <code>index_name</code>, you need to convert it as the first step in <code>__init__()</code>, like <code>index_name</code> is assigned to <code>work_dir</code> in <code>docarray/index/backends/hnswlib.py</code>.</p>
<h2 id="implement-a-query-builder-for-your-document-index">Implement a Query Builder for your Document Index</h2>
<p>Every Document Index exposes a Query Builder interface which the user can use to build composed, hybrid queries.</p>
<p>For you as a backend integrator, there are three main things that are related to this:</p>
<ul>
<li>The <code>QueryBuilder</code> class that you need to implement</li>
<li>The <code>execute_query()</code> method that you need to implement</li>
<li>The <code>build_query()</code> method that just returns an instance of your <code>QueryBuilder</code>. You <em>don't</em> need to implement this yourself.</li>
</ul>
<p>Overall, this interface is very flexible, meaning that not a whole lot of structure is imposed on you.
You can decide what happens in the <code>QueryBuilder</code> class, and how the query is executed in the <code>execute_query()</code> method.
But there are a few things that you should stick to.</p>
<h3 id="implement-the-querybuilder-class">Implement the <code>QueryBuilder</code> class</h3>
<p>The QueryBuilder is what accumulates partial queries and builds them into a single query, ready to be executed.</p>
<p>Your Query Builder has to be an inner class of your Document Index, its class name has to be <code>QueryBuilder</code>, and it has to inherit from the Base Query Builder:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="k">class</span> <span class="nc">QueryBuilder</span><span class="p">(</span><span class="n">BaseDocIndex</span><span class="o">.</span><span class="n">QueryBuilder</span><span class="p">):</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>    <span class="o">...</span>
</span></code></pre></div>
<p>The Query Builder exposes the following interface:</p>
<ul>
<li>The same query related methods as the <code>BaseDocIndex</code> class (e.g. <code>filter</code>, <code>find</code>, <code>text_search</code>, and their batched variants)</li>
<li>The <code>build()</code> method</li>
</ul>
<p>Its goal is to enable an interface for composing complex queries, like this:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="n">index</span> <span class="o">=</span> <span class="n">MyDocumentIndex</span><span class="p">[</span><span class="n">MyDoc</span><span class="p">]()</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="n">q</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">build_query</span><span class="p">()</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="o">.</span><span class="n">text_search</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="n">index</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
</span></code></pre></div>
<p>How the individual calls to <code>find</code>, <code>filter</code>, and <code>text_search</code> are combined is up to your backend.</p>
<h3 id="implement-individual-query-methods">Implement individual query methods</h3>
<p>It is up to you how you implement the individual query methods, e.g. <code>find</code>, <code>filter</code>, and <code>text_search</code> of the query builder.</p>
<p>However, there are a few common strategies that you could use: If your backend natively supports a query builder pattern,
then you could wrap that with the DocumentIndex Query Builder interface; or you could set these methods to simply collect
arguments passed to it and defer the actual query building to the <code>build()</code> method (the `HNSWLibIndex does this); or you
could eagerly build intermediate queries at every call.</p>
<p>No matter what you do, you should stick to one design principle: <strong>Every call to <code>find</code>, <code>filter</code>, <code>text_search</code> etc.
should return a new instance of the Query Builder</strong>, with updated state.</p>
<div class="admonition note">
<p class="admonition-title">If your backend does not support all operations</p>
<p>Most backends do not support compositions of all query operations, which is completely fine.
If that is the case, you should handle that in the following way:</p>
<ul>
<li>If an operation <strong>is</strong> supported by the Document Index that you are implementing, but <strong>is not</strong> supported by the Query Builder, you should use the pre-defined <code>_raise_not_composable()</code> helper method to raise a <code>NotImplementedError</code>.</li>
<li>If an operation <strong>is not</strong> supported by the Document Index that you are implementing, and <strong>is not</strong> supported by the Query Builder, you should use the pre-defined <code>_raise_not_supported()</code> helper method to raise a <code>NotImplementedError</code>.</li>
<li>If an operation <strong>is</strong> supported by the Document Index that you are implementing, and <strong>is</strong> supported by the Query Builder, but <strong>is not</strong> supported in combination with a certain other operation, you should raise a <code>RuntimeError</code>. Depending on how your Query Builder is set up, you might want to do that either eagerly during the conflicting method call, or lazily inside of <code>.build()</code>.</li>
</ul>
</div>
<h3 id="implement-the-build-method">Implement the <code>build()</code> method</h3>
<p>It is up to you how you implement the <code>build()</code> method, and this will depend on how you implemented the individual query
methods in the section above.</p>
<p>Depending on this, <code>build()</code> could wrap a similar method of an underlying native query builder; or it could combine
the collected arguments and build an actual query; or it could even be a no-op.
The important thing is that it returns a query object that can be immediately executed by the <code>execute_query()</code> method.</p>
<p>What exactly this query object is, is up to you. It could be a string, a dictionary, a custom object, or anything else.</p>
<h3 id="implement-the-execute_query-method">Implement the <code>execute_query()</code> method</h3>
<p>The <code>execute_query()</code> method of your Document Index has to fulfill two requirements:
1. Be able to execute a query that was built by the <code>build()</code> method of the corresponding <code>QueryBuilder</code> class, and return the results.
2. Be able to execute a native query object of your backend, as a simple pass-through, and return the results. This is intended for users to be able to use the native query language of your backend and manually construct their own queries, if they want to.</p>
<p>How you achieve this is up to you. If 1. and 2. condense down to the same thing because <code>build()</code> returns a native query
is also up to you.</p>
<p>The only thing to keep in mind is that any heavy lifting, combining of various inputs and queries, and potential validation
should happen in the <code>build()</code> method, and not in <code>execute_query()</code>.</p></div>


  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/docarray/docarray" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://discord.com/invite/WaMp6PVPgR" target="_blank" rel="noopener" title="discord.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/docarray" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "content.code.copy"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.efa0ade1.min.js"></script>
      
    
  </body>
</html>